08:04:18:297  INFO 5400 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
08:04:20:861  INFO 5400 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=7354dc93-1c39-3fd2-bb0a-da5c143a2406
08:04:21:084  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:109  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:110  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:162  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:167  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:170  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:171  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$570/0x0000000800689440] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:172  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:181  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:186  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:21:190  INFO 5400 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
08:04:21:321  INFO 5400 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
08:04:21:331  INFO 5400 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
08:04:21:552  INFO 5400 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
08:04:21:694  INFO 5400 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
08:04:21:724  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 3731de20-77b3-4e65-929b-90c4c199caf4
08:04:21:724  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] RpcClient init label, labels = {module=naming, source=sdk}
08:04:21:726  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
08:04:21:726  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
08:04:21:727  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
08:04:21:731  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Try to connect to server on start up, server: {serverIp = '192.168.137.128', server main port = 8848}
08:04:21:905  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Success to connect to server [192.168.137.128:8848] on start up, connectionId = 1712448261725_192.168.137.1_65321
08:04:21:905  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
08:04:21:905  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$476/0x0000000800527840
08:04:21:906  INFO 5400 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Notify connected event to listeners.
08:04:22:002  INFO 5400 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.137.128:8099
08:04:22:513  INFO 5400 --- [nacos-grpc-client-executor-4] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Receive server push request, request = NotifySubscriberRequest, requestId = 2
08:04:22:534  INFO 5400 --- [nacos-grpc-client-executor-4] com.alibaba.nacos.common.remote.client   : [3731de20-77b3-4e65-929b-90c4c199caf4] Ack server push request, request = NotifySubscriberRequest, requestId = 2
08:04:23:942  INFO 5400 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.137.128:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
08:04:25:002  INFO 5400 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x597436b3, L:/192.168.137.1:65325 - R:/192.168.137.128:8099]
08:04:25:009  INFO 5400 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 62 ms, version:1.5.2,role:TMROLE,channel:[id: 0x597436b3, L:/192.168.137.1:65325 - R:/192.168.137.128:8099]
08:04:25:010  INFO 5400 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
08:04:25:021  INFO 5400 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
08:04:25:021  INFO 5400 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
08:04:25:030  INFO 5400 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
08:04:25:030  INFO 5400 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
08:04:25:030  INFO 5400 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
08:04:25:033  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:25:257  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:25:261  INFO 5400 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
08:04:25:555  INFO 5400 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
08:04:25:556  INFO 5400 --- [main] o.a.catalina.core.AprLifecycleListener   : An older version [1.2.23] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.30]
08:04:25:556  INFO 5400 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.23] using APR version [1.7.0].
08:04:25:556  INFO 5400 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [false].
08:04:25:557  INFO 5400 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
08:04:25:561  INFO 5400 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1c  28 May 2019]
08:04:25:569  INFO 5400 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
08:04:25:569  INFO 5400 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
08:04:25:872  INFO 5400 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
08:04:25:872  INFO 5400 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7545 ms
08:04:26:247  INFO 5400 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
08:04:26:488  INFO 5400 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
08:04:26:796  INFO 5400 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
08:04:27:023  INFO 5400 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.137.128:8099
08:04:27:023  INFO 5400 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.137.128:3306/hm-trade
08:04:27:025  INFO 5400 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.137.128:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.137.128:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
08:04:27:051  INFO 5400 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x86991361, L:/192.168.137.1:65389 - R:/192.168.137.128:8099]
08:04:27:051  INFO 5400 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 22 ms, version:1.5.2,role:RMROLE,channel:[id: 0x86991361, L:/192.168.137.1:65389 - R:/192.168.137.128:8099]
08:04:30:892  INFO 5400 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$23367a6f] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
08:04:30:944  INFO 5400 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
08:04:31:194  INFO 5400 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
08:04:33:953  INFO 5400 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
08:04:34:213  INFO 5400 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
08:04:38:210  INFO 5400 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
08:04:38:559  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of b43b7a7c-0429-4ca9-a356-eb955e974563
08:04:38:560  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] RpcClient init label, labels = {module=naming, source=sdk}
08:04:38:560  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
08:04:38:560  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
08:04:38:560  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
08:04:38:560  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Try to connect to server on start up, server: {serverIp = '192.168.137.128', server main port = 8848}
08:04:38:702  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Success to connect to server [192.168.137.128:8848] on start up, connectionId = 1712448278548_192.168.137.1_65422
08:04:38:702  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
08:04:38:702  INFO 5400 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Notify connected event to listeners.
08:04:38:702  INFO 5400 --- [main] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$476/0x0000000800527840
08:04:38:722  INFO 5400 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
08:04:38:731  INFO 5400 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.137.1:8085 register finished
08:04:39:281  INFO 5400 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Receive server push request, request = NotifySubscriberRequest, requestId = 7
08:04:39:288  INFO 5400 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Ack server push request, request = NotifySubscriberRequest, requestId = 7
08:04:40:839  INFO 5400 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
08:04:40:840  INFO 5400 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
08:04:40:842  INFO 5400 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
08:04:40:861  INFO 5400 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
08:04:40:942  INFO 5400 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.137.128:5672]
08:04:40:983  INFO 5400 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#48e3017a:0/SimpleConnection@7d45e754 [delegate=amqp://hmall@192.168.137.128:5672//hmall, localPort= 65425]
08:04:41:058  INFO 5400 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 36.257 seconds (JVM running for 38.932)
08:04:41:066  INFO 5400 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
08:04:41:069  INFO 5400 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
08:04:41:070  INFO 5400 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
08:44:55:315  INFO 5400 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
08:44:55:315  INFO 5400 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
08:44:55:316  INFO 5400 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
08:44:55:462  INFO 5400 --- [http-nio-8085-exec-1] io.seata.tm.TransactionManagerHolder     : TransactionManager Singleton io.seata.tm.DefaultTransactionManager@415250d2
08:44:55:494  INFO 5400 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473409]
08:44:55:500 DEBUG 5400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
08:44:56:118  INFO 5400 --- [nacos-grpc-client-executor-497] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Receive server push request, request = NotifySubscriberRequest, requestId = 21
08:44:56:118  INFO 5400 --- [nacos-grpc-client-executor-497] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Ack server push request, request = NotifySubscriberRequest, requestId = 21
08:44:56:211 DEBUG 5400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (710ms)
08:44:56:250 DEBUG 5400 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
08:44:56:397 DEBUG 5400 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776773115502718978(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
08:44:56:472 DEBUG 5400 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
08:44:56:483 DEBUG 5400 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
08:44:56:484 DEBUG 5400 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776773115502718978(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
08:44:56:534 DEBUG 5400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
08:44:56:753 DEBUG 5400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (218ms)
08:44:56:781  INFO 5400 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473409
08:44:56:781  INFO 5400 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473409] commit status: Committed
08:44:56:897 DEBUG 5400 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
08:44:56:897 DEBUG 5400 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776773115502718978(Long)
08:44:56:910 DEBUG 5400 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
08:44:57:781  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473409,branchId=36536752835473410,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
08:44:57:784  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473409 36536752835473410 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
08:44:57:785  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
08:44:57:790  INFO 5400 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473409,branchId=36536752835473411,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
08:44:57:790  INFO 5400 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473409 36536752835473411 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
08:44:57:790  INFO 5400 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
08:45:06:782 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
08:45:06:783 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776773115502718978(Long)
08:45:06:784 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
08:45:06:784 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776773115502718978 HTTP/1.1
08:45:06:822 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (37ms)
08:45:06:823  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
08:45:07:362  INFO 5400 --- [nacos-grpc-client-executor-501] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Receive server push request, request = NotifySubscriberRequest, requestId = 23
08:45:07:363  INFO 5400 --- [nacos-grpc-client-executor-501] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Ack server push request, request = NotifySubscriberRequest, requestId = 23
08:45:16:826 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
08:45:16:827 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776773115502718978(Long)
08:45:16:828 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
08:45:16:828 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776773115502718978 HTTP/1.1
08:45:16:835 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
08:45:16:835  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
08:45:26:839 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
08:45:26:839 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776773115502718978(Long)
08:45:26:841 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
08:45:26:842 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776773115502718978 HTTP/1.1
08:45:26:850 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (7ms)
08:45:26:850  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
08:45:41:853 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
08:45:41:854 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776773115502718978(Long)
08:45:41:855 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
08:45:41:855 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776773115502718978 HTTP/1.1
08:45:41:863 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (7ms)
08:45:41:863  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
08:45:56:867 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
08:45:56:867 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776773115502718978(Long)
08:45:56:868 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
08:45:56:869 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776773115502718978 HTTP/1.1
08:45:56:874 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
08:45:56:966  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473413]
08:45:56:988 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
08:45:57:000 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T08:45:56.975426200(LocalDateTime), 1776773115502718978(Long)
08:45:57:035 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
08:45:57:038 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
08:45:57:042 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776773115502718978(Long)
08:45:57:043 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
08:45:57:044 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
08:45:57:096 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (51ms)
08:45:57:098  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473413
08:45:57:098  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473413] commit status: Committed
08:45:57:773  INFO 5400 --- [rpcDispatch_RMROLE_1_3_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473413,branchId=36536752835473414,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
08:45:57:773  INFO 5400 --- [rpcDispatch_RMROLE_1_3_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473413 36536752835473414 jdbc:mysql://192.168.137.128:3306/hm-trade null
08:45:57:774  INFO 5400 --- [rpcDispatch_RMROLE_1_3_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:04:21:321  INFO 5400 --- [http-nio-8085-exec-4] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473416]
09:04:21:322 DEBUG 5400 --- [http-nio-8085-exec-4] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
09:04:21:833 DEBUG 5400 --- [http-nio-8085-exec-4] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (511ms)
09:04:21:835 DEBUG 5400 --- [http-nio-8085-exec-4] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
09:04:21:843 DEBUG 5400 --- [http-nio-8085-exec-4] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776778004324741121(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
09:04:21:851 DEBUG 5400 --- [http-nio-8085-exec-4] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
09:04:21:852 DEBUG 5400 --- [http-nio-8085-exec-4] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
09:04:21:853 DEBUG 5400 --- [http-nio-8085-exec-4] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776778004324741121(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
09:04:21:870 DEBUG 5400 --- [http-nio-8085-exec-4] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
09:04:21:897 DEBUG 5400 --- [http-nio-8085-exec-4] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (26ms)
09:04:21:899  INFO 5400 --- [http-nio-8085-exec-4] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473416
09:04:21:899  INFO 5400 --- [http-nio-8085-exec-4] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473416] commit status: Committed
09:04:21:960 DEBUG 5400 --- [http-nio-8085-exec-5] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:04:21:960 DEBUG 5400 --- [http-nio-8085-exec-5] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776778004324741121(Long)
09:04:21:963 DEBUG 5400 --- [http-nio-8085-exec-5] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:04:22:769  INFO 5400 --- [rpcDispatch_RMROLE_1_4_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473416,branchId=36536752835473417,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
09:04:22:769  INFO 5400 --- [rpcDispatch_RMROLE_1_4_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473416 36536752835473417 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
09:04:22:769  INFO 5400 --- [rpcDispatch_RMROLE_1_4_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:04:22:771  INFO 5400 --- [rpcDispatch_RMROLE_1_5_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473416,branchId=36536752835473418,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
09:04:22:771  INFO 5400 --- [rpcDispatch_RMROLE_1_5_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473416 36536752835473418 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
09:04:22:771  INFO 5400 --- [rpcDispatch_RMROLE_1_5_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:04:31:901 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:04:31:901 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776778004324741121(Long)
09:04:31:902 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:04:31:903 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776778004324741121 HTTP/1.1
09:04:31:910 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (7ms)
09:04:31:911  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:04:41:915 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:04:41:915 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776778004324741121(Long)
09:04:41:916 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:04:41:917 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776778004324741121 HTTP/1.1
09:04:41:923 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:04:41:923  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:04:51:928 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:04:51:928 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776778004324741121(Long)
09:04:51:929 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:04:51:930 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776778004324741121 HTTP/1.1
09:04:51:935 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:04:51:936  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:05:06:940 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:05:06:940 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776778004324741121(Long)
09:05:06:941 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:05:06:941 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776778004324741121 HTTP/1.1
09:05:06:946 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:05:06:947  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:05:21:951 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:05:21:951 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776778004324741121(Long)
09:05:21:952 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:05:21:953 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776778004324741121 HTTP/1.1
09:05:21:958 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:05:21:961  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473420]
09:05:21:962 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
09:05:21:963 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T09:05:21.961519300(LocalDateTime), 1776778004324741121(Long)
09:05:21:974 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
09:05:21:976 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
09:05:21:976 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776778004324741121(Long)
09:05:21:977 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
09:05:21:978 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
09:05:21:996 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (18ms)
09:05:21:998  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473420
09:05:21:998  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473420] commit status: Committed
09:05:22:770  INFO 5400 --- [rpcDispatch_RMROLE_1_6_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473420,branchId=36536752835473421,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
09:05:22:770  INFO 5400 --- [rpcDispatch_RMROLE_1_6_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473420 36536752835473421 jdbc:mysql://192.168.137.128:3306/hm-trade null
09:05:22:770  INFO 5400 --- [rpcDispatch_RMROLE_1_6_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:08:30:271  INFO 5400 --- [http-nio-8085-exec-7] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473423]
09:08:30:271 DEBUG 5400 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
09:08:30:793 DEBUG 5400 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (521ms)
09:08:30:795 DEBUG 5400 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
09:08:30:795 DEBUG 5400 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776779048547053569(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
09:08:30:805 DEBUG 5400 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
09:08:30:806 DEBUG 5400 --- [http-nio-8085-exec-7] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
09:08:30:807 DEBUG 5400 --- [http-nio-8085-exec-7] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776779048547053569(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
09:08:30:818 DEBUG 5400 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
09:08:30:837 DEBUG 5400 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (19ms)
09:08:30:840  INFO 5400 --- [http-nio-8085-exec-7] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473423
09:08:30:840  INFO 5400 --- [http-nio-8085-exec-7] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473423] commit status: Committed
09:08:30:905 DEBUG 5400 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:08:30:905 DEBUG 5400 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776779048547053569(Long)
09:08:30:907 DEBUG 5400 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:08:31:768  INFO 5400 --- [rpcDispatch_RMROLE_1_7_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473423,branchId=36536752835473424,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
09:08:31:768  INFO 5400 --- [rpcDispatch_RMROLE_1_7_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473423 36536752835473424 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
09:08:31:768  INFO 5400 --- [rpcDispatch_RMROLE_1_7_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:08:31:770  INFO 5400 --- [rpcDispatch_RMROLE_1_8_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473423,branchId=36536752835473425,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
09:08:31:770  INFO 5400 --- [rpcDispatch_RMROLE_1_8_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473423 36536752835473425 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
09:08:31:771  INFO 5400 --- [rpcDispatch_RMROLE_1_8_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:08:40:842 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:08:40:842 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776779048547053569(Long)
09:08:40:844 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:08:40:845 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776779048547053569 HTTP/1.1
09:08:40:851 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:08:40:851  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:08:50:855 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:08:50:855 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776779048547053569(Long)
09:08:50:856 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:08:50:856 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776779048547053569 HTTP/1.1
09:08:50:862 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:08:50:862  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:09:00:866 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:09:00:867 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776779048547053569(Long)
09:09:00:868 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:09:00:868 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776779048547053569 HTTP/1.1
09:09:00:876 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (7ms)
09:09:00:876  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:09:15:880 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:09:15:880 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776779048547053569(Long)
09:09:15:881 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:09:15:881 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776779048547053569 HTTP/1.1
09:09:15:887 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:09:15:887  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:09:30:891 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:09:30:891 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776779048547053569(Long)
09:09:30:892 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:09:30:893 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776779048547053569 HTTP/1.1
09:09:30:897 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:09:30:900  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473427]
09:09:30:901 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
09:09:30:901 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T09:09:30.900827(LocalDateTime), 1776779048547053569(Long)
09:09:30:916 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
09:09:30:917 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
09:09:30:918 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776779048547053569(Long)
09:09:30:918 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
09:09:30:919 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
09:09:30:937 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (18ms)
09:09:30:939  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473427
09:09:30:940  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473427] commit status: Committed
09:09:31:768  INFO 5400 --- [rpcDispatch_RMROLE_1_9_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473427,branchId=36536752835473428,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
09:09:31:768  INFO 5400 --- [rpcDispatch_RMROLE_1_9_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473427 36536752835473428 jdbc:mysql://192.168.137.128:3306/hm-trade null
09:09:31:768  INFO 5400 --- [rpcDispatch_RMROLE_1_9_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:19:48:027  INFO 5400 --- [http-nio-8085-exec-10] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473430]
09:19:48:028 DEBUG 5400 --- [http-nio-8085-exec-10] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
09:19:48:545 DEBUG 5400 --- [http-nio-8085-exec-10] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (517ms)
09:19:48:546 DEBUG 5400 --- [http-nio-8085-exec-10] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
09:19:48:553 DEBUG 5400 --- [http-nio-8085-exec-10] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776781891240783873(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
09:19:48:567 DEBUG 5400 --- [http-nio-8085-exec-10] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
09:19:48:568 DEBUG 5400 --- [http-nio-8085-exec-10] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
09:19:48:569 DEBUG 5400 --- [http-nio-8085-exec-10] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776781891240783873(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
09:19:48:586 DEBUG 5400 --- [http-nio-8085-exec-10] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
09:19:48:611 DEBUG 5400 --- [http-nio-8085-exec-10] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (24ms)
09:19:48:614  INFO 5400 --- [http-nio-8085-exec-10] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473430
09:19:48:614  INFO 5400 --- [http-nio-8085-exec-10] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473430] commit status: Committed
09:19:48:668 DEBUG 5400 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:19:48:668 DEBUG 5400 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776781891240783873(Long)
09:19:48:669 DEBUG 5400 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:19:48:766  INFO 5400 --- [rpcDispatch_RMROLE_1_10_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473430,branchId=36536752835473431,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
09:19:48:766  INFO 5400 --- [rpcDispatch_RMROLE_1_10_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473430 36536752835473431 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
09:19:48:766  INFO 5400 --- [rpcDispatch_RMROLE_1_10_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:19:48:768  INFO 5400 --- [rpcDispatch_RMROLE_1_11_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473430,branchId=36536752835473432,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
09:19:48:769  INFO 5400 --- [rpcDispatch_RMROLE_1_11_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473430 36536752835473432 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
09:19:48:769  INFO 5400 --- [rpcDispatch_RMROLE_1_11_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:19:58:617 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:19:58:617 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776781891240783873(Long)
09:19:58:618 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:19:58:619 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776781891240783873 HTTP/1.1
09:19:58:630 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (11ms)
09:19:58:631  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:20:08:634 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:20:08:634 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776781891240783873(Long)
09:20:08:635 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:20:08:636 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776781891240783873 HTTP/1.1
09:20:08:642 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
09:20:08:643  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:20:18:646 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:20:18:646 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776781891240783873(Long)
09:20:18:647 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:20:18:648 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776781891240783873 HTTP/1.1
09:20:18:654 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:20:18:654  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:20:33:658 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:20:33:658 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776781891240783873(Long)
09:20:33:659 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:20:33:660 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776781891240783873 HTTP/1.1
09:20:33:666 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:20:33:666  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:20:48:670 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:20:48:670 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776781891240783873(Long)
09:20:48:671 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:20:48:671 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776781891240783873 HTTP/1.1
09:20:48:678 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
09:20:48:681  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473434]
09:20:48:683 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
09:20:48:684 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T09:20:48.682163400(LocalDateTime), 1776781891240783873(Long)
09:20:48:695 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
09:20:48:696 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
09:20:48:696 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776781891240783873(Long)
09:20:48:698 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
09:20:48:698 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
09:20:48:719 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (20ms)
09:20:48:720  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473434
09:20:48:720  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473434] commit status: Committed
09:20:48:766  INFO 5400 --- [rpcDispatch_RMROLE_1_12_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473434,branchId=36536752835473435,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
09:20:48:766  INFO 5400 --- [rpcDispatch_RMROLE_1_12_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473434 36536752835473435 jdbc:mysql://192.168.137.128:3306/hm-trade null
09:20:48:766  INFO 5400 --- [rpcDispatch_RMROLE_1_12_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:25:51:131 DEBUG 5400 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:25:51:131 DEBUG 5400 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776781891240783873(Long)
09:25:51:133 DEBUG 5400 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:26:04:826  INFO 5400 --- [http-nio-8085-exec-4] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473437]
09:26:04:826 DEBUG 5400 --- [http-nio-8085-exec-4] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
09:26:05:336 DEBUG 5400 --- [http-nio-8085-exec-4] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (509ms)
09:26:05:337 DEBUG 5400 --- [http-nio-8085-exec-4] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
09:26:05:338 DEBUG 5400 --- [http-nio-8085-exec-4] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776783471616782337(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
09:26:05:348 DEBUG 5400 --- [http-nio-8085-exec-4] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
09:26:05:349 DEBUG 5400 --- [http-nio-8085-exec-4] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
09:26:05:349 DEBUG 5400 --- [http-nio-8085-exec-4] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776783471616782337(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
09:26:05:359 DEBUG 5400 --- [http-nio-8085-exec-4] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
09:26:05:376 DEBUG 5400 --- [http-nio-8085-exec-4] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (16ms)
09:26:05:378  INFO 5400 --- [http-nio-8085-exec-4] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473437
09:26:05:378  INFO 5400 --- [http-nio-8085-exec-4] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473437] commit status: Committed
09:26:05:425 DEBUG 5400 --- [http-nio-8085-exec-5] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:26:05:426 DEBUG 5400 --- [http-nio-8085-exec-5] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776783471616782337(Long)
09:26:05:427 DEBUG 5400 --- [http-nio-8085-exec-5] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:26:05:764  INFO 5400 --- [rpcDispatch_RMROLE_1_13_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473437,branchId=36536752835473438,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
09:26:05:765  INFO 5400 --- [rpcDispatch_RMROLE_1_13_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473437 36536752835473438 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
09:26:05:765  INFO 5400 --- [rpcDispatch_RMROLE_1_13_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:26:05:766  INFO 5400 --- [rpcDispatch_RMROLE_1_14_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473437,branchId=36536752835473439,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
09:26:05:766  INFO 5400 --- [rpcDispatch_RMROLE_1_14_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473437 36536752835473439 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
09:26:05:766  INFO 5400 --- [rpcDispatch_RMROLE_1_14_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:26:15:380 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:26:15:380 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776783471616782337(Long)
09:26:15:381 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:26:15:381 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776783471616782337 HTTP/1.1
09:26:15:388 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
09:26:15:389  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:26:25:392 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:26:25:393 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776783471616782337(Long)
09:26:25:394 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:26:25:394 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776783471616782337 HTTP/1.1
09:26:25:400 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:26:25:401  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:26:35:404 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:26:35:405 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776783471616782337(Long)
09:26:35:406 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:26:35:406 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776783471616782337 HTTP/1.1
09:26:35:412 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:26:35:412  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:26:50:416 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:26:50:416 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776783471616782337(Long)
09:26:50:417 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:26:50:417 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776783471616782337 HTTP/1.1
09:26:50:423 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:26:50:423  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:27:05:427 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:27:05:427 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776783471616782337(Long)
09:27:05:428 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:27:05:428 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776783471616782337 HTTP/1.1
09:27:05:433 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:27:05:436  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473441]
09:27:05:437 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
09:27:05:437 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T09:27:05.436331500(LocalDateTime), 1776783471616782337(Long)
09:27:05:447 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
09:27:05:448 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
09:27:05:448 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776783471616782337(Long)
09:27:05:449 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
09:27:05:450 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
09:27:05:469 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (18ms)
09:27:05:471  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473441
09:27:05:471  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473441] commit status: Committed
09:27:05:765  INFO 5400 --- [rpcDispatch_RMROLE_1_15_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473441,branchId=36536752835473442,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
09:27:05:765  INFO 5400 --- [rpcDispatch_RMROLE_1_15_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473441 36536752835473442 jdbc:mysql://192.168.137.128:3306/hm-trade null
09:27:05:765  INFO 5400 --- [rpcDispatch_RMROLE_1_15_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:34:02:051  INFO 5400 --- [http-nio-8085-exec-7] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473444]
09:34:02:051 DEBUG 5400 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
09:34:02:563 DEBUG 5400 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (511ms)
09:34:02:566 DEBUG 5400 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
09:34:02:566 DEBUG 5400 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776785473251897345(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
09:34:02:577 DEBUG 5400 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
09:34:02:579 DEBUG 5400 --- [http-nio-8085-exec-7] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
09:34:02:580 DEBUG 5400 --- [http-nio-8085-exec-7] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776785473251897345(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
09:34:02:590 DEBUG 5400 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
09:34:02:606 DEBUG 5400 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (16ms)
09:34:02:609  INFO 5400 --- [http-nio-8085-exec-7] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473444
09:34:02:609  INFO 5400 --- [http-nio-8085-exec-7] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473444] commit status: Committed
09:34:02:688 DEBUG 5400 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:34:02:688 DEBUG 5400 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776785473251897345(Long)
09:34:02:690 DEBUG 5400 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:34:02:763  INFO 5400 --- [rpcDispatch_RMROLE_1_16_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473444,branchId=36536752835473445,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
09:34:02:763  INFO 5400 --- [rpcDispatch_RMROLE_1_16_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473444 36536752835473445 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
09:34:02:763  INFO 5400 --- [rpcDispatch_RMROLE_1_16_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:34:02:765  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473444,branchId=36536752835473446,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
09:34:02:765  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473444 36536752835473446 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
09:34:02:765  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:34:12:610 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:34:12:610 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776785473251897345(Long)
09:34:12:612 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:34:12:612 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776785473251897345 HTTP/1.1
09:34:12:620 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (8ms)
09:34:12:621  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:34:22:624 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:34:22:624 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776785473251897345(Long)
09:34:22:625 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:34:22:626 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776785473251897345 HTTP/1.1
09:34:22:631 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:34:22:632  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:34:32:635 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:34:32:635 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776785473251897345(Long)
09:34:32:636 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:34:32:637 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776785473251897345 HTTP/1.1
09:34:32:642 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:34:32:642  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:34:47:645 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:34:47:645 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776785473251897345(Long)
09:34:47:646 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:34:47:647 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776785473251897345 HTTP/1.1
09:34:47:652 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:34:47:653  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:35:02:656 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:35:02:656 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776785473251897345(Long)
09:35:02:657 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:35:02:658 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776785473251897345 HTTP/1.1
09:35:02:664 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:35:02:666  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473448]
09:35:02:667 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
09:35:02:667 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T09:35:02.666683500(LocalDateTime), 1776785473251897345(Long)
09:35:02:682 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
09:35:02:683 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
09:35:02:684 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776785473251897345(Long)
09:35:02:685 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
09:35:02:685 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
09:35:02:714 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (28ms)
09:35:02:716  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473448
09:35:02:716  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473448] commit status: Committed
09:35:02:762  INFO 5400 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473448,branchId=36536752835473449,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
09:35:02:762  INFO 5400 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473448 36536752835473449 jdbc:mysql://192.168.137.128:3306/hm-trade null
09:35:02:762  INFO 5400 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:41:04:637  INFO 5400 --- [http-nio-8085-exec-10] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473451]
09:41:04:637 DEBUG 5400 --- [http-nio-8085-exec-10] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
09:41:05:150 DEBUG 5400 --- [http-nio-8085-exec-10] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (512ms)
09:41:05:152 DEBUG 5400 --- [http-nio-8085-exec-10] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
09:41:05:152 DEBUG 5400 --- [http-nio-8085-exec-10] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776787245701853185(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
09:41:05:162 DEBUG 5400 --- [http-nio-8085-exec-10] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
09:41:05:163 DEBUG 5400 --- [http-nio-8085-exec-10] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
09:41:05:163 DEBUG 5400 --- [http-nio-8085-exec-10] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776787245701853185(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
09:41:05:179 DEBUG 5400 --- [http-nio-8085-exec-10] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
09:41:05:193 DEBUG 5400 --- [http-nio-8085-exec-10] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (14ms)
09:41:05:196  INFO 5400 --- [http-nio-8085-exec-10] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473451
09:41:05:196  INFO 5400 --- [http-nio-8085-exec-10] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473451] commit status: Committed
09:41:05:254 DEBUG 5400 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:41:05:254 DEBUG 5400 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776787245701853185(Long)
09:41:05:255 DEBUG 5400 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:41:05:761  INFO 5400 --- [rpcDispatch_RMROLE_1_3_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473451,branchId=36536752835473452,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
09:41:05:762  INFO 5400 --- [rpcDispatch_RMROLE_1_3_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473451 36536752835473452 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
09:41:05:762  INFO 5400 --- [rpcDispatch_RMROLE_1_3_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:41:05:763  INFO 5400 --- [rpcDispatch_RMROLE_1_4_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473451,branchId=36536752835473453,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
09:41:05:763  INFO 5400 --- [rpcDispatch_RMROLE_1_4_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473451 36536752835473453 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
09:41:05:763  INFO 5400 --- [rpcDispatch_RMROLE_1_4_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:41:15:197 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:41:15:197 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776787245701853185(Long)
09:41:15:198 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:41:15:199 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776787245701853185 HTTP/1.1
09:41:15:205 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:41:15:205  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:41:25:209 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:41:25:209 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776787245701853185(Long)
09:41:25:210 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:41:25:211 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776787245701853185 HTTP/1.1
09:41:25:216 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:41:25:216  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:41:35:222 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:41:35:222 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776787245701853185(Long)
09:41:35:225 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:41:35:226 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776787245701853185 HTTP/1.1
09:41:35:233 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (7ms)
09:41:35:235  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:41:50:239 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:41:50:239 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776787245701853185(Long)
09:41:50:240 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:41:50:240 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776787245701853185 HTTP/1.1
09:41:50:248 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (7ms)
09:41:50:249  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:42:05:252 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:42:05:252 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776787245701853185(Long)
09:42:05:253 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:42:05:253 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776787245701853185 HTTP/1.1
09:42:05:258 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:42:05:261  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473455]
09:42:05:262 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
09:42:05:262 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T09:42:05.261173600(LocalDateTime), 1776787245701853185(Long)
09:42:05:271 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
09:42:05:272 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
09:42:05:272 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776787245701853185(Long)
09:42:05:274 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
09:42:05:275 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
09:42:05:292 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (16ms)
09:42:05:293  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473455
09:42:05:294  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473455] commit status: Committed
09:42:05:761  INFO 5400 --- [rpcDispatch_RMROLE_1_5_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473455,branchId=36536752835473456,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
09:42:05:761  INFO 5400 --- [rpcDispatch_RMROLE_1_5_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473455 36536752835473456 jdbc:mysql://192.168.137.128:3306/hm-trade null
09:42:05:761  INFO 5400 --- [rpcDispatch_RMROLE_1_5_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:47:33:427  INFO 5400 --- [http-nio-8085-exec-3] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473458]
09:47:33:428 DEBUG 5400 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
09:47:33:942 DEBUG 5400 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (513ms)
09:47:33:944 DEBUG 5400 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
09:47:33:944 DEBUG 5400 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776788876426276866(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
09:47:33:953 DEBUG 5400 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
09:47:33:955 DEBUG 5400 --- [http-nio-8085-exec-3] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
09:47:33:955 DEBUG 5400 --- [http-nio-8085-exec-3] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776788876426276866(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
09:47:33:967 DEBUG 5400 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
09:47:33:983 DEBUG 5400 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (15ms)
09:47:33:986  INFO 5400 --- [http-nio-8085-exec-3] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473458
09:47:33:986  INFO 5400 --- [http-nio-8085-exec-3] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473458] commit status: Committed
09:47:34:055 DEBUG 5400 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:47:34:055 DEBUG 5400 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776788876426276866(Long)
09:47:34:056 DEBUG 5400 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:47:34:760  INFO 5400 --- [rpcDispatch_RMROLE_1_6_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473458,branchId=36536752835473459,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
09:47:34:760  INFO 5400 --- [rpcDispatch_RMROLE_1_6_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473458 36536752835473459 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
09:47:34:760  INFO 5400 --- [rpcDispatch_RMROLE_1_6_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:47:34:762  INFO 5400 --- [rpcDispatch_RMROLE_1_7_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473458,branchId=36536752835473460,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
09:47:34:762  INFO 5400 --- [rpcDispatch_RMROLE_1_7_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473458 36536752835473460 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
09:47:34:762  INFO 5400 --- [rpcDispatch_RMROLE_1_7_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:47:43:987 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:47:43:987 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776788876426276866(Long)
09:47:43:988 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:47:43:989 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776788876426276866 HTTP/1.1
09:47:43:995 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
09:47:43:995  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:47:53:998 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:47:53:998 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776788876426276866(Long)
09:47:54:000 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:47:54:000 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776788876426276866 HTTP/1.1
09:47:54:005 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:47:54:006  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:48:04:009 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:48:04:009 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776788876426276866(Long)
09:48:04:010 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:48:04:011 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776788876426276866 HTTP/1.1
09:48:04:015 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:48:04:016  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:48:19:018 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:48:19:019 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776788876426276866(Long)
09:48:19:020 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:48:19:020 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776788876426276866 HTTP/1.1
09:48:19:026 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:48:19:027  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:48:34:030 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:48:34:030 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776788876426276866(Long)
09:48:34:031 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:48:34:031 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776788876426276866 HTTP/1.1
09:48:34:037 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:48:34:039  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473462]
09:48:34:041 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
09:48:34:041 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T09:48:34.039539700(LocalDateTime), 1776788876426276866(Long)
09:48:34:052 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
09:48:34:055 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
09:48:34:055 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776788876426276866(Long)
09:48:34:057 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
09:48:34:058 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
09:48:34:096 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (37ms)
09:48:34:099  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473462
09:48:34:100  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473462] commit status: Committed
09:48:34:759  INFO 5400 --- [rpcDispatch_RMROLE_1_8_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473462,branchId=36536752835473463,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
09:48:34:759  INFO 5400 --- [rpcDispatch_RMROLE_1_8_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473462 36536752835473463 jdbc:mysql://192.168.137.128:3306/hm-trade null
09:48:34:760  INFO 5400 --- [rpcDispatch_RMROLE_1_8_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:53:09:988  INFO 5400 --- [http-nio-8085-exec-6] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473465]
09:53:09:988 DEBUG 5400 --- [http-nio-8085-exec-6] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
09:53:10:509 DEBUG 5400 --- [http-nio-8085-exec-6] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (520ms)
09:53:10:511 DEBUG 5400 --- [http-nio-8085-exec-6] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
09:53:10:518 DEBUG 5400 --- [http-nio-8085-exec-6] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776790288086396930(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
09:53:10:526 DEBUG 5400 --- [http-nio-8085-exec-6] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
09:53:10:527 DEBUG 5400 --- [http-nio-8085-exec-6] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
09:53:10:527 DEBUG 5400 --- [http-nio-8085-exec-6] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776790288086396930(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
09:53:10:537 DEBUG 5400 --- [http-nio-8085-exec-6] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
09:53:10:564 DEBUG 5400 --- [http-nio-8085-exec-6] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (26ms)
09:53:10:566  INFO 5400 --- [http-nio-8085-exec-6] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473465
09:53:10:567  INFO 5400 --- [http-nio-8085-exec-6] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473465] commit status: Committed
09:53:10:617 DEBUG 5400 --- [http-nio-8085-exec-7] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:53:10:617 DEBUG 5400 --- [http-nio-8085-exec-7] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776790288086396930(Long)
09:53:10:618 DEBUG 5400 --- [http-nio-8085-exec-7] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:53:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_9_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473465,branchId=36536752835473466,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
09:53:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_9_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473465 36536752835473466 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
09:53:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_9_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:53:10:760  INFO 5400 --- [rpcDispatch_RMROLE_1_10_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473465,branchId=36536752835473467,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
09:53:10:760  INFO 5400 --- [rpcDispatch_RMROLE_1_10_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473465 36536752835473467 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
09:53:10:760  INFO 5400 --- [rpcDispatch_RMROLE_1_10_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
09:53:20:569 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:53:20:569 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776790288086396930(Long)
09:53:20:570 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:53:20:571 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776790288086396930 HTTP/1.1
09:53:20:577 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
09:53:20:577  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:53:30:580 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:53:30:580 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776790288086396930(Long)
09:53:30:582 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:53:30:582 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776790288086396930 HTTP/1.1
09:53:30:586 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:53:30:587  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:53:40:590 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:53:40:590 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776790288086396930(Long)
09:53:40:591 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:53:40:591 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776790288086396930 HTTP/1.1
09:53:40:597 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
09:53:40:598  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:53:55:601 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:53:55:601 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776790288086396930(Long)
09:53:55:602 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:53:55:603 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776790288086396930 HTTP/1.1
09:53:55:607 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
09:53:55:608  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
09:54:10:617 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
09:54:10:617 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776790288086396930(Long)
09:54:10:618 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
09:54:10:619 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776790288086396930 HTTP/1.1
09:54:10:624 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
09:54:10:626  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473469]
09:54:10:628 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
09:54:10:628 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T09:54:10.627397600(LocalDateTime), 1776790288086396930(Long)
09:54:10:643 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
09:54:10:644 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
09:54:10:644 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776790288086396930(Long)
09:54:10:645 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
09:54:10:646 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
09:54:10:664 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (17ms)
09:54:10:666  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473469
09:54:10:666  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473469] commit status: Committed
09:54:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_11_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473469,branchId=36536752835473470,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
09:54:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_11_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473469 36536752835473470 jdbc:mysql://192.168.137.128:3306/hm-trade null
09:54:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_11_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
10:02:34:272  INFO 5400 --- [http-nio-8085-exec-9] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473472]
10:02:34:272 DEBUG 5400 --- [http-nio-8085-exec-9] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
10:02:34:800 DEBUG 5400 --- [http-nio-8085-exec-9] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (527ms)
10:02:34:803 DEBUG 5400 --- [http-nio-8085-exec-9] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
10:02:34:804 DEBUG 5400 --- [http-nio-8085-exec-9] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776792654873423873(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
10:02:34:812 DEBUG 5400 --- [http-nio-8085-exec-9] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
10:02:34:812 DEBUG 5400 --- [http-nio-8085-exec-9] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
10:02:34:813 DEBUG 5400 --- [http-nio-8085-exec-9] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776792654873423873(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
10:02:34:829 DEBUG 5400 --- [http-nio-8085-exec-9] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
10:02:34:843 DEBUG 5400 --- [http-nio-8085-exec-9] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (14ms)
10:02:34:849  INFO 5400 --- [http-nio-8085-exec-9] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473472
10:02:34:849  INFO 5400 --- [http-nio-8085-exec-9] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473472] commit status: Committed
10:02:34:905 DEBUG 5400 --- [http-nio-8085-exec-10] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:02:34:905 DEBUG 5400 --- [http-nio-8085-exec-10] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776792654873423873(Long)
10:02:34:907 DEBUG 5400 --- [http-nio-8085-exec-10] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:02:35:756  INFO 5400 --- [rpcDispatch_RMROLE_1_12_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473472,branchId=36536752835473473,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
10:02:35:756  INFO 5400 --- [rpcDispatch_RMROLE_1_12_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473472 36536752835473473 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
10:02:35:757  INFO 5400 --- [rpcDispatch_RMROLE_1_12_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
10:02:35:759  INFO 5400 --- [rpcDispatch_RMROLE_1_13_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473472,branchId=36536752835473474,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
10:02:35:759  INFO 5400 --- [rpcDispatch_RMROLE_1_13_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473472 36536752835473474 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
10:02:35:759  INFO 5400 --- [rpcDispatch_RMROLE_1_13_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
10:02:44:852 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:02:44:852 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776792654873423873(Long)
10:02:44:853 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:02:44:854 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776792654873423873 HTTP/1.1
10:02:44:862 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (7ms)
10:02:44:865  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
10:02:54:868 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:02:54:868 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776792654873423873(Long)
10:02:54:870 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:02:54:870 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776792654873423873 HTTP/1.1
10:02:54:875 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
10:02:54:875  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
10:03:04:881 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:03:04:881 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776792654873423873(Long)
10:03:04:882 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:03:04:882 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776792654873423873 HTTP/1.1
10:03:04:889 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
10:03:04:889  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
10:03:19:893 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:03:19:893 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776792654873423873(Long)
10:03:19:894 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:03:19:895 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776792654873423873 HTTP/1.1
10:03:19:901 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (6ms)
10:03:19:901  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
10:03:34:906 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:03:34:906 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776792654873423873(Long)
10:03:34:907 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:03:34:907 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776792654873423873 HTTP/1.1
10:03:34:912 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
10:03:34:914  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473476]
10:03:34:915 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
10:03:34:915 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T10:03:34.914565700(LocalDateTime), 1776792654873423873(Long)
10:03:34:925 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
10:03:34:925 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
10:03:34:926 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776792654873423873(Long)
10:03:34:927 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
10:03:34:927 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
10:03:34:952 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (24ms)
10:03:34:954  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473476
10:03:34:954  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473476] commit status: Committed
10:03:35:757  INFO 5400 --- [rpcDispatch_RMROLE_1_14_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473476,branchId=36536752835473477,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
10:03:35:757  INFO 5400 --- [rpcDispatch_RMROLE_1_14_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473476 36536752835473477 jdbc:mysql://192.168.137.128:3306/hm-trade null
10:03:35:757  INFO 5400 --- [rpcDispatch_RMROLE_1_14_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
10:08:09:395  INFO 5400 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473479]
10:08:09:395 DEBUG 5400 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
10:08:09:904 DEBUG 5400 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (508ms)
10:08:09:905 DEBUG 5400 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
10:08:09:906 DEBUG 5400 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776794060426637313(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
10:08:09:914 DEBUG 5400 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
10:08:09:915 DEBUG 5400 --- [http-nio-8085-exec-2] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
10:08:09:915 DEBUG 5400 --- [http-nio-8085-exec-2] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776794060426637313(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
10:08:09:925 DEBUG 5400 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
10:08:09:940 DEBUG 5400 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (14ms)
10:08:09:942  INFO 5400 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473479
10:08:09:943  INFO 5400 --- [http-nio-8085-exec-2] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473479] commit status: Committed
10:08:09:999 DEBUG 5400 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:08:09:999 DEBUG 5400 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776794060426637313(Long)
10:08:10:001 DEBUG 5400 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:08:10:756  INFO 5400 --- [rpcDispatch_RMROLE_1_15_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473479,branchId=36536752835473480,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
10:08:10:756  INFO 5400 --- [rpcDispatch_RMROLE_1_15_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473479 36536752835473480 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
10:08:10:756  INFO 5400 --- [rpcDispatch_RMROLE_1_15_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
10:08:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_16_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473479,branchId=36536752835473481,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
10:08:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_16_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473479 36536752835473481 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
10:08:10:758  INFO 5400 --- [rpcDispatch_RMROLE_1_16_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
10:08:19:945 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:08:19:945 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776794060426637313(Long)
10:08:19:946 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:08:19:946 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776794060426637313 HTTP/1.1
10:08:19:955 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (9ms)
10:08:19:956  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
10:08:29:959 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:08:29:959 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776794060426637313(Long)
10:08:29:960 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:08:29:960 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776794060426637313 HTTP/1.1
10:08:29:965 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
10:08:29:966  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
10:08:39:969 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:08:39:969 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776794060426637313(Long)
10:08:39:970 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:08:39:971 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776794060426637313 HTTP/1.1
10:08:39:975 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (4ms)
10:08:39:976  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
10:08:54:979 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:08:54:979 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776794060426637313(Long)
10:08:54:980 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:08:54:981 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776794060426637313 HTTP/1.1
10:08:54:986 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
10:08:54:986  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
10:09:09:989 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
10:09:09:990 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776794060426637313(Long)
10:09:09:991 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
10:09:09:991 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776794060426637313 HTTP/1.1
10:09:09:997 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
10:09:10:000  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473483]
10:09:10:000 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
10:09:10:001 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T10:09:10.000236400(LocalDateTime), 1776794060426637313(Long)
10:09:10:021 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
10:09:10:022 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
10:09:10:022 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776794060426637313(Long)
10:09:10:023 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
10:09:10:024 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
10:09:10:046 DEBUG 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (22ms)
10:09:10:048  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473483
10:09:10:048  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473483] commit status: Committed
10:09:10:756  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473483,branchId=36536752835473484,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
10:09:10:756  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473483 36536752835473484 jdbc:mysql://192.168.137.128:3306/hm-trade null
10:09:10:756  INFO 5400 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
11:07:56:087  WARN 5400 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
11:07:56:087  WARN 5400 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
11:07:56:089  WARN 5400 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
11:07:56:092  WARN 5400 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
11:07:56:181  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
11:07:56:182  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
11:07:56:401  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
11:07:56:943  INFO 5400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
11:07:58:010  INFO 5400 --- [nacos-grpc-client-executor-2218] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Receive server push request, request = NotifySubscriberRequest, requestId = 76
11:07:58:012  INFO 5400 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
11:07:58:016  INFO 5400 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
11:07:58:020  INFO 5400 --- [nacos-grpc-client-executor-2218] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Ack server push request, request = NotifySubscriberRequest, requestId = 76
11:07:58:107  INFO 5400 --- [nacos-grpc-client-executor-2220] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Receive server push request, request = NotifySubscriberRequest, requestId = 77
11:07:58:112  INFO 5400 --- [nacos-grpc-client-executor-2220] com.alibaba.nacos.common.remote.client   : [b43b7a7c-0429-4ca9-a356-eb955e974563] Ack server push request, request = NotifySubscriberRequest, requestId = 77
11:07:58:341  INFO 5400 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
11:07:58:342  INFO 5400 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@579ed299[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
11:07:58:342  INFO 5400 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1712448278548_192.168.137.1_65422
11:07:58:345  INFO 5400 --- [nacos-grpc-client-executor-2221] c.a.n.c.remote.client.grpc.GrpcClient    : [1712448278548_192.168.137.1_65422]Ignore complete event,isRunning:false,isAbandon=false
11:07:58:346  INFO 5400 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@1de7cbf7[Running, pool size = 8, active threads = 0, queued tasks = 0, completed tasks = 2222]
11:07:58:362  INFO 5400 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
11:07:58:384  INFO 5400 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
11:07:58:392  INFO 5400 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
11:07:58:392  INFO 5400 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
14:27:44:287  INFO 22940 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
14:27:46:325  INFO 22940 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=7354dc93-1c39-3fd2-bb0a-da5c143a2406
14:27:46:468  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataCoreAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:469  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springApplicationContextProvider' of type [io.seata.spring.boot.autoconfigure.provider.SpringApplicationContextProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:469  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:507  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'failureHandler' of type [io.seata.tm.api.DefaultFailureHandlerImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:511  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:513  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:514  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$570/0x0000000800668840] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:515  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:521  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'springCloudAlibabaConfiguration' of type [io.seata.spring.boot.autoconfigure.properties.SpringCloudAlibabaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:525  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataProperties' of type [io.seata.spring.boot.autoconfigure.properties.SeataProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:46:773  INFO 22940 --- [main] i.s.s.b.a.SeataAutoConfiguration         : Automatically configure Seata
14:27:46:857  INFO 22940 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
14:27:46:866  INFO 22940 --- [main] io.seata.config.ConfigurationFactory     : load Configuration from :Spring Configuration
14:27:46:964  INFO 22940 --- [main] i.s.s.a.GlobalTransactionScanner         : Initializing Global Transaction Clients ... 
14:27:47:061  INFO 22940 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
14:27:47:116  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 12a95d75-630f-48de-b233-76055d7f9501
14:27:47:116  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] RpcClient init label, labels = {module=naming, source=sdk}
14:27:47:118  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
14:27:47:119  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
14:27:47:119  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
14:27:47:120  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Try to connect to server on start up, server: {serverIp = '192.168.137.128', server main port = 8848}
14:27:47:409  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Success to connect to server [192.168.137.128:8848] on start up, connectionId = 1712471267275_192.168.137.1_64564
14:27:47:410  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
14:27:47:410  INFO 22940 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Notify connected event to listeners.
14:27:47:412  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$476/0x0000000800420840
14:27:47:700  INFO 22940 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.137.128:8099
14:27:47:990  INFO 22940 --- [nacos-grpc-client-executor-4] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Receive server push request, request = NotifySubscriberRequest, requestId = 112
14:27:48:008  INFO 22940 --- [nacos-grpc-client-executor-4] com.alibaba.nacos.common.remote.client   : [12a95d75-630f-48de-b233-76055d7f9501] Ack server push request, request = NotifySubscriberRequest, requestId = 112
14:27:50:204  INFO 22940 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:TMROLE,address:192.168.137.128:8099,msg:< RegisterTMRequest{applicationId='trade-service', transactionServiceGroup='hmall'} >
14:27:52:661  INFO 22940 --- [main] i.s.c.rpc.netty.TmNettyRemotingClient    : register TM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x5a2229db, L:/192.168.137.1:64621 - R:/192.168.137.128:8099]
14:27:52:670  INFO 22940 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 123 ms, version:1.5.2,role:TMROLE,channel:[id: 0x5a2229db, L:/192.168.137.1:64621 - R:/192.168.137.128:8099]
14:27:52:671  INFO 22940 --- [main] i.s.s.a.GlobalTransactionScanner         : Transaction Manager Client is initialized. applicationId[trade-service] txServiceGroup[hmall]
14:27:52:685  INFO 22940 --- [main] io.seata.rm.datasource.AsyncWorker       : Async Commit Buffer Limit: 10000
14:27:52:685  INFO 22940 --- [main] i.s.rm.datasource.xa.ResourceManagerXA   : ResourceManagerXA init ...
14:27:52:695  INFO 22940 --- [main] i.s.core.rpc.netty.NettyClientBootstrap  : NettyClientBootstrap has started
14:27:52:695  INFO 22940 --- [main] i.s.s.a.GlobalTransactionScanner         : Resource Manager is initialized. applicationId[trade-service] txServiceGroup[hmall]
14:27:52:696  INFO 22940 --- [main] i.s.s.a.GlobalTransactionScanner         : Global Transaction Clients are initialized. 
14:27:52:699  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration' of type [io.seata.spring.boot.autoconfigure.SeataDataSourceAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:53:011  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration' of type [com.alibaba.cloud.seata.feign.SeataFeignClientAutoConfiguration$FeignBeanPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:53:016  INFO 22940 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'seataFeignObjectWrapper' of type [com.alibaba.cloud.seata.feign.SeataFeignObjectWrapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:27:53:454  INFO 22940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
14:27:53:461  INFO 22940 --- [main] o.a.catalina.core.AprLifecycleListener   : An older version [1.2.23] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.30]
14:27:53:462  INFO 22940 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.23] using APR version [1.7.0].
14:27:53:463  INFO 22940 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [false].
14:27:53:464  INFO 22940 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
14:27:53:469  INFO 22940 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1c  28 May 2019]
14:27:53:482  INFO 22940 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
14:27:53:483  INFO 22940 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
14:27:53:982  INFO 22940 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
14:27:53:982  INFO 22940 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 9673 ms
14:27:54:849  INFO 22940 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
14:28:00:130  INFO 22940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
14:28:01:284  INFO 22940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
14:28:01:571  INFO 22940 --- [main] i.s.c.r.netty.NettyClientChannelManager  : will connect to 192.168.137.128:8099
14:28:01:572  INFO 22940 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : RM will register :jdbc:mysql://192.168.137.128:3306/hm-trade
14:28:01:573  INFO 22940 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : NettyPool create channel to transactionRole:RMROLE,address:192.168.137.128:8099,msg:< RegisterRMRequest{resourceIds='jdbc:mysql://192.168.137.128:3306/hm-trade', applicationId='trade-service', transactionServiceGroup='hmall'} >
14:28:01:705  INFO 22940 --- [main] i.s.c.rpc.netty.RmNettyRemotingClient    : register RM success. client version:1.5.2, server version:1.5.2,channel:[id: 0x794e57f9, L:/192.168.137.1:64698 - R:/192.168.137.128:8099]
14:28:01:706  INFO 22940 --- [main] i.s.core.rpc.netty.NettyPoolableFactory  : register success, cost 88 ms, version:1.5.2,role:RMROLE,channel:[id: 0x794e57f9, L:/192.168.137.1:64698 - R:/192.168.137.128:8099]
14:28:08:404  INFO 22940 --- [main] i.s.s.a.GlobalTransactionScanner         : Bean[com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$4139cfe] with name [orderServiceImpl] would use interceptor [io.seata.spring.annotation.GlobalTransactionalInterceptor]
14:28:08:442  INFO 22940 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
14:28:08:712  INFO 22940 --- [main] c.a.c.sentinel.SentinelWebMvcConfigurer  : [Sentinel Starter] register SentinelWebInterceptor with urlPatterns: [/**].
14:28:10:747  INFO 22940 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
14:28:12:624  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of efd2b797-d988-48bc-9ee0-f3fa20955c10
14:28:12:624  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] RpcClient init label, labels = {module=naming, source=sdk}
14:28:12:624  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
14:28:12:624  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
14:28:12:625  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
14:28:12:625  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Try to connect to server on start up, server: {serverIp = '192.168.137.128', server main port = 8848}
14:28:12:746  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Success to connect to server [192.168.137.128:8848] on start up, connectionId = 1712471292684_192.168.137.1_64789
14:28:12:746  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
14:28:12:746  INFO 22940 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Notify connected event to listeners.
14:28:12:746  INFO 22940 --- [main] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$476/0x0000000800420840
14:28:12:777  INFO 22940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
14:28:12:785  INFO 22940 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.137.1:8085 register finished
14:28:13:311  INFO 22940 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Receive server push request, request = NotifySubscriberRequest, requestId = 118
14:28:13:334  INFO 22940 --- [nacos-grpc-client-executor-5] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Ack server push request, request = NotifySubscriberRequest, requestId = 118
14:28:14:379  INFO 22940 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
14:28:14:382  INFO 22940 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
14:28:14:408  INFO 22940 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
14:28:14:497  INFO 22940 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.137.128:5672]
14:28:14:551  INFO 22940 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#52737c1:0/SimpleConnection@3a22c944 [delegate=amqp://hmall@192.168.137.128:5672//hmall, localPort= 64812]
14:28:14:624  INFO 22940 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 44.388 seconds (JVM running for 47.29)
14:28:14:630  INFO 22940 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service, group=DEFAULT_GROUP
14:28:14:631  INFO 22940 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service-local.yaml, group=DEFAULT_GROUP
14:28:14:632  INFO 22940 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=trade-service.yaml, group=DEFAULT_GROUP
14:29:49:721  INFO 22940 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
14:29:49:721  INFO 22940 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
14:29:49:722  INFO 22940 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
14:29:49:870  INFO 22940 --- [http-nio-8085-exec-1] io.seata.tm.TransactionManagerHolder     : TransactionManager Singleton io.seata.tm.DefaultTransactionManager@4ad5809f
14:29:49:888  INFO 22940 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473486]
14:29:49:898 DEBUG 22940 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=1533902 HTTP/1.1
14:29:50:508  INFO 22940 --- [nacos-grpc-client-executor-27] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Receive server push request, request = NotifySubscriberRequest, requestId = 128
14:29:50:508  INFO 22940 --- [nacos-grpc-client-executor-27] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Ack server push request, request = NotifySubscriberRequest, requestId = 128
14:29:50:640 DEBUG 22940 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200 (741ms)
14:29:50:678 DEBUG 22940 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
14:29:50:861 DEBUG 22940 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1776859914224816130(Long), 38800(Integer), 3(Integer), 1(Long), 1(Integer)
14:29:50:935 DEBUG 22940 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
14:29:50:945 DEBUG 22940 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
14:29:50:946 DEBUG 22940 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1776859914224816130(Long), 1533902(Long), 4(Integer), 新西兰进口牛奶 纽仕兰 3.5g蛋白质全脂牛奶 250ml*24整箱装纯牛奶(String), {}(String), 9700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t3526/295/888755633/189982/16ea21b4/5816dce5N70820f42.jpg!q70.jpg.webp(String)
14:29:51:000 DEBUG 22940 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
14:29:51:244 DEBUG 22940 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200 (243ms)
14:29:51:266  INFO 22940 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473486
14:29:51:267  INFO 22940 --- [http-nio-8085-exec-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473486] commit status: Committed
14:29:51:347 DEBUG 22940 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
14:29:51:348 DEBUG 22940 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776859914224816130(Long)
14:29:51:363 DEBUG 22940 --- [http-nio-8085-exec-4] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
14:29:51:703  INFO 22940 --- [rpcDispatch_RMROLE_1_1_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473486,branchId=36536752835473487,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"skipCheckLock":true}
14:29:51:706  INFO 22940 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473486 36536752835473487 jdbc:mysql://192.168.137.128:3306/hm-trade {"skipCheckLock":true}
14:29:51:706  INFO 22940 --- [rpcDispatch_RMROLE_1_1_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
14:29:51:710  INFO 22940 --- [rpcDispatch_RMROLE_1_2_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473486,branchId=36536752835473488,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData={"autoCommit":false,"skipCheckLock":true}
14:29:51:711  INFO 22940 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473486 36536752835473488 jdbc:mysql://192.168.137.128:3306/hm-trade {"autoCommit":false,"skipCheckLock":true}
14:29:51:711  INFO 22940 --- [rpcDispatch_RMROLE_1_2_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
14:30:01:271 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
14:30:01:271 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776859914224816130(Long)
14:30:01:273 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
14:30:01:274 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776859914224816130 HTTP/1.1
14:30:01:312 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (38ms)
14:30:01:314  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
14:30:01:851  INFO 22940 --- [nacos-grpc-client-executor-31] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Receive server push request, request = NotifySubscriberRequest, requestId = 130
14:30:01:851  INFO 22940 --- [nacos-grpc-client-executor-31] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Ack server push request, request = NotifySubscriberRequest, requestId = 130
14:30:11:317 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
14:30:11:317 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776859914224816130(Long)
14:30:11:319 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
14:30:11:319 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776859914224816130 HTTP/1.1
14:30:11:325 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
14:30:11:326  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
14:30:21:329 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
14:30:21:329 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776859914224816130(Long)
14:30:21:330 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
14:30:21:331 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776859914224816130 HTTP/1.1
14:30:21:337 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
14:30:21:337  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
14:30:36:341 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
14:30:36:341 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776859914224816130(Long)
14:30:36:342 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
14:30:36:343 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776859914224816130 HTTP/1.1
14:30:36:350 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (7ms)
14:30:36:351  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.listener.OrderStatusCheckListener  : 订单未支付且未超时
14:30:51:355 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
14:30:51:355 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1776859914224816130(Long)
14:30:51:356 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
14:30:51:357 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] ---> GET http://pay-service/pay-orders/getStatus?Biz_id=1776859914224816130 HTTP/1.1
14:30:51:363 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#isPayByPayOrder] <--- HTTP/1.1 200 (5ms)
14:30:51:367  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Begin new global transaction [192.168.137.128:8099:36536752835473490]
14:30:51:388 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,close_time=? WHERE (id = ?)
14:30:51:400 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer), 2024-04-07T14:30:51.375948700(LocalDateTime), 1776859914224816130(Long)
14:30:51:436 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
14:30:51:440 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
14:30:51:443 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1776859914224816130(Long)
14:30:51:445 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
14:30:51:446 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] ---> PUT http://item-service/items/stock/add HTTP/1.1
14:30:51:499 DEBUG 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#addStock] <--- HTTP/1.1 200 (53ms)
14:30:51:501  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : Suspending current transaction, xid = 192.168.137.128:8099:36536752835473490
14:30:51:501  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] i.seata.tm.api.DefaultGlobalTransaction  : [192.168.137.128:8099:36536752835473490] commit status: Committed
14:30:51:700  INFO 22940 --- [rpcDispatch_RMROLE_1_3_16] i.s.c.r.p.c.RmBranchCommitProcessor      : rm client handle branch commit process:xid=192.168.137.128:8099:36536752835473490,branchId=36536752835473491,branchType=AT,resourceId=jdbc:mysql://192.168.137.128:3306/hm-trade,applicationData=null
14:30:51:700  INFO 22940 --- [rpcDispatch_RMROLE_1_3_16] io.seata.rm.AbstractRMHandler            : Branch committing: 192.168.137.128:8099:36536752835473490 36536752835473491 jdbc:mysql://192.168.137.128:3306/hm-trade null
14:30:51:700  INFO 22940 --- [rpcDispatch_RMROLE_1_3_16] io.seata.rm.AbstractRMHandler            : Branch commit result: PhaseTwo_Committed
14:32:19:015  WARN 22940 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
14:32:19:015  WARN 22940 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
14:32:19:015  WARN 22940 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
14:32:19:016  WARN 22940 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
14:32:19:024  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
14:32:19:025  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
14:32:19:223  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
14:32:19:400  INFO 22940 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
14:32:21:400  INFO 22940 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
14:32:21:406  INFO 22940 --- [SpringContextShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
14:32:21:466  INFO 22940 --- [nacos-grpc-client-executor-62] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Receive server push request, request = NotifySubscriberRequest, requestId = 131
14:32:21:477  INFO 22940 --- [nacos-grpc-client-executor-62] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Ack server push request, request = NotifySubscriberRequest, requestId = 131
14:32:21:479  INFO 22940 --- [nacos-grpc-client-executor-63] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Receive server push request, request = NotifySubscriberRequest, requestId = 133
14:32:21:487  INFO 22940 --- [nacos-grpc-client-executor-63] com.alibaba.nacos.common.remote.client   : [efd2b797-d988-48bc-9ee0-f3fa20955c10] Ack server push request, request = NotifySubscriberRequest, requestId = 133
14:32:21:739  INFO 22940 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
14:32:21:739  INFO 22940 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@636b8cb1[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
14:32:21:739  INFO 22940 --- [SpringContextShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1712471292684_192.168.137.1_64789
14:32:21:741  INFO 22940 --- [SpringContextShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@14c3b18[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 64]
14:32:21:763  INFO 22940 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
14:32:21:800  INFO 22940 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
14:32:21:805  INFO 22940 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
14:32:21:805  INFO 22940 --- [SpringContextShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
14:32:21:810  INFO 22940 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : channel inactive: [id: 0x794e57f9, L:/192.168.137.1:64698 ! R:/192.168.137.128:8099]
14:32:21:811  INFO 22940 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.netty.NettyClientChannelManager  : return to pool, rm channel:[id: 0x794e57f9, L:/192.168.137.1:64698 ! R:/192.168.137.128:8099]
14:32:21:811  INFO 22940 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : channel valid false,channel:[id: 0x794e57f9, L:/192.168.137.1:64698 ! R:/192.168.137.128:8099]
14:32:21:830  INFO 22940 --- [NettyClientSelector_RMROLE_1_1] i.s.core.rpc.netty.NettyPoolableFactory  : will destroy channel:[id: 0x794e57f9, L:/192.168.137.1:64698 ! R:/192.168.137.128:8099]
14:32:21:833  INFO 22940 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x794e57f9, L:/192.168.137.1:64698 ! R:/192.168.137.128:8099]) will closed
14:32:21:833  INFO 22940 --- [NettyClientSelector_RMROLE_1_1] i.s.c.r.n.AbstractNettyRemotingClient    : ChannelHandlerContext(AbstractNettyRemotingClient$ClientHandler#0, [id: 0x794e57f9, L:/192.168.137.1:64698 ! R:/192.168.137.128:8099]) will closed
